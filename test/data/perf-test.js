// Generated by CoffeeScript 1.6.3
(function() {
  var Schema, Table, assert, highseljoin, lowselcoljoin, makeTable, niters, suite, table, test, timer, vows;

  require("../env");

  vows = require("vows");

  assert = require("assert");

  try {
    timer = performance;
  } catch (_error) {
    timer = Date;
  }

  suite = vows.describe("perf.js");

  Table = data.Table;

  Schema = data.Schema;

  makeTable = function(n, type) {
    var rows;
    if (n == null) {
      n = 10;
    }
    if (type == null) {
      type = "row";
    }
    rows = _.times(n, function(i) {
      return {
        a: i % 2,
        b: "" + i,
        c: i % 100,
        d: i % 5000,
        x: i,
        y: {
          z: i
        }
      };
    });
    return Table.fromArray(rows, null, type);
  };

  test = function(name, n, table) {
    var avgCost, perrowCosts;
    perrowCosts = [];
    _.times(n, function(i) {
      return table.each(function() {});
    });
    avgCost = table.timer().avg();
    return console.log("" + name + " took: " + avgCost + "/all()");
  };

  table = makeTable(1000);

  niters = 20;

  test("base", niters, table);

  lowselcoljoin = table.join(table, 'c');

  test("lowseljoin", niters, lowselcoljoin);

  highseljoin = table.join(table, 'd');

  test("highseljoin", niters, highseljoin);

}).call(this);
